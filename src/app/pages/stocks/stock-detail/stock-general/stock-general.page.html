<ion-content fullscreen>
  @if (dataAvailableSecurity) {
    <ion-list class="padding-vertical-none">
      <ion-item-divider color="primary">
        <ion-label>Market</ion-label>
        @if (securityDetail?.isIndex) {
          <ion-badge class="ion-margin-horizontal" slot="end" color="secondary">Index</ion-badge>
        }
        @if (!securityDetail?.isIndex) {
          <ion-button slot="end" class="ion-margin-horizontal" color="danger" (click)="clickNewBidOrder()" expand="block" fill="solid" shape="round">
            Buy
          </ion-button>
        }
        @if (!securityDetail?.isIndex) {
          <ion-button slot="end" class="ion-margin-horizontal" color="success" (click)="clickNewAskOrder()" expand="block" fill="solid" shape="round">
            Sell
          </ion-button>
        }
      </ion-item-divider>
      <ion-item>
        <ion-grid class="">
          <ion-row>
            <ion-col size="3">
              <ion-label class="">
                <p class="field-heading">Close</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.closeChanged}">
                  @if (securityDetail?.close) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.closeChanged}">{{securityDetail?.closeDisplay}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-label class="">
                <p class="field-heading">Open</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.openChanged}">
                  @if (securityDetail?.open) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.openChanged}">{{securityDetail?.openDisplay}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-label class="">
                <p class="field-heading">High</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.highChanged}">
                  @if (securityDetail?.high) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.highChanged}">{{securityDetail?.highDisplay}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-label class="">
                <p class="field-heading">Low</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.lowChanged}">
                  @if (securityDetail?.low) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.lowChanged}">{{securityDetail?.lowDisplay}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
          </ion-row>
          @if (securityDetail?.todayDelta) {
            <ion-row class="ion-align-items-center">
              <ion-col size="3">
                <ion-label class="">
                  <p class="field-heading">Change</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.todayDeltaChanged}">
                    @if (securityDetail?.todayDelta) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.todayDeltaChanged}">{{securityDetail?.todayDeltaDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
            </ion-row>
          }
        </ion-grid>
      </ion-item>
      @if (securityDetail?.auctionPrice && !securityDetail?.isIndex) {
        <ion-item>
          <ion-grid>
            <ion-row>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Auction price</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.auctionPriceChanged}">
                    @if (securityDetail?.auctionPrice) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.auctionPriceChanged}">{{securityDetail?.auctionPriceDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Auction quantity</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.auctionQuantityChanged}">
                    @if (securityDetail?.auctionQuantity) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.auctionQuantityChanged}">{{securityDetail?.auctionQuantityDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Auction remander</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.auctionRemainderChanged}">
                    @if (securityDetail?.auctionRemainder) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.auctionRemainderChanged}">{{securityDetail?.auctionRemainderDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      }
      @if (!securityDetail?.isIndex) {
        <ion-item>
          <ion-grid class="">
            <ion-row>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-bid">Best bid</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.bestBidChanged}">
                    @if (securityDetail?.bestBid) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.bestBidChanged}">{{securityDetail?.bestBidDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-bid">Bid count</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.bidCountChanged}">
                    @if (securityDetail?.bidCount) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.bidCountChanged}">{{securityDetail?.bidCountDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-bid">Bid quantity</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.bidQuantityChanged}">
                    @if (securityDetail?.bidQuantity) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.bidQuantityChanged}">{{securityDetail?.bidQuantityDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-ask">Best ask</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.bestAskChanged}">
                    @if (securityDetail?.bestAsk) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.bestAskChanged}">{{securityDetail?.bestAskDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-ask">Ask count</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.askCountChanged}">
                    @if (securityDetail?.askCount) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.askCountChanged}">{{securityDetail?.askCountDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4" size-sm="2">
                <ion-label class="">
                  <p class="field-heading text-ask">Ask quantity</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.askQuantityChanged}">
                    @if (securityDetail?.askQuantity) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.askQuantityChanged}">{{securityDetail?.askQuantityDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      }
      @if (!securityDetail?.isIndex) {
        <ion-item>
          <ion-grid>
            <ion-row>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Trades</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.numberOfTradesChanged}">
                    @if (securityDetail?.numberOfTrades) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.numberOfTradesChanged}">{{securityDetail?.numberOfTradesDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="5">
                <ion-label class="">
                  <p class="field-heading">Volume</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.volumeChanged}">
                    @if (securityDetail?.volume) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.volumeChanged}">{{securityDetail?.volumeDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="3">
                <ion-label class="">
                  <p class="field-heading">VWAP</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.vWAPChanged}">
                    @if (securityDetail?.vWAP) {
                      <ion-label [ngClass]="{'highlight-change': securityDetail?.vWAPChanged}">{{securityDetail?.vWAPDisplay}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      }
      <ion-item-divider color="primary">
        <ion-label>State</ion-label>
      </ion-item-divider>
      <ion-accordion-group>
        <ion-accordion>
          <ion-item slot="header">
            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <ion-label class="">
                    <p class="field-heading">Trading state</p>
                    <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.tradingStateChanged}">
                      @if (securityDetail?.tradingState) {
                        <ion-label [ngClass]="{'highlight-change': securityDetail?.tradingStateChanged}">{{securityDetail?.tradingState}}</ion-label>
                      } @else {
                        <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                      }
                    </div>
                  </ion-label>
                </ion-col>
                <ion-col size="6">
                  <ion-label class="">
                    <p class="field-heading">Reason</p>
                    <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.tradingStateReasonChanged}">
                      @if (securityDetail?.tradingStateReason) {
                        <ion-label [ngClass]="{'highlight-change': securityDetail?.tradingStateReasonChanged}">{{securityDetail?.tradingStateReason}}</ion-label>
                      } @else {
                        <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                      }
                    </div>
                  </ion-label>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
          <ion-item slot="content">
            <ion-grid>
              @if (!securityDetail?.isIndex) {
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="">
                      <p class="field-heading">Allows</p>
                      <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.tradingStateAllowsChanged}">
                        @if (securityDetail?.tradingStateAllows) {
                          <ion-label class="text-small ion-text-wrap" [ngClass]="{'highlight-change': securityDetail?.tradingStateAllowsChanged}">{{securityDetail?.tradingStateAllows}}</ion-label>
                        } @else {
                          <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                        }
                      </div>
                    </ion-label>
                  </ion-col>
                </ion-row>
              }
            </ion-grid>
          </ion-item>
          <ion-item slot="content">
            <ion-grid>
              @if (!securityDetail?.isIndex) {
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="">
                      <p class="field-heading">Markets</p>
                      <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.tradingMarketsChanged}">
                        @if (securityDetail?.tradingMarkets) {
                          <ion-label class="text-small ion-text-wrap" [ngClass]="{'highlight-change': securityDetail?.tradingMarketsChanged}">{{securityDetail?.tradingMarkets}}</ion-label>
                        } @else {
                          <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                        }
                      </div>
                    </ion-label>
                  </ion-col>
                </ion-row>
              }
            </ion-grid>
          </ion-item>
        </ion-accordion>
      </ion-accordion-group>
      @if (!securityDetail?.isIndex) {
        <ion-item-divider color="primary">
          <ion-label>Attributes</ion-label>
        </ion-item-divider>
      }
      @if (!securityDetail?.isIndex) {
        <ion-item>
          <ion-grid>
            <ion-row>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Class</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.classChanged}">
                    @if (securityDetail?.class) {
                      <ion-label class="text-small" [ngClass]="{'highlight-change': securityDetail?.classChanged}">{{securityDetail?.class}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">CFI</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.cfiChanged}">
                    @if (securityDetail?.cfi) {
                      <ion-label class="text-small" [ngClass]="{'highlight-change': securityDetail?.cfiChanged}">{{securityDetail?.cfi}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
              <ion-col size="4">
                <ion-label class="">
                  <p class="field-heading">Market</p>
                  <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.marketChanged}">
                    @if (securityDetail?.market) {
                      <ion-label class="text-small" [ngClass]="{'highlight-change': securityDetail?.marketChanged}">{{securityDetail?.market}}</ion-label>
                    } @else {
                      <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                    }
                  </div>
                </ion-label>
              </ion-col>
            </ion-row>
            <!-- <ion-row>
            <ion-col size="6">
              <ion-label class="">
                <p class="field-heading">Shares issued</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.shareIssueChanged}">
                  <ion-label [ngClass]="{'highlight-change': securityDetail?.shareIssueChanged}" *ngIf="securityDetail?.shareIssue;else NoShareIssue">{{securityDetail?.shareIssueDisplay}}</ion-label>
                  <ng-template #NoShareIssue>
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  </ng-template>
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="6">
              <ion-label class="">
                <p class="field-heading">Status note</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.statusNoteChanged}">
                  <ion-label [ngClass]="{'highlight-change': securityDetail?.statusNoteChanged}" *ngIf="securityDetail?.statusNote;else NoStatusNote">{{securityDetail?.statusNote}}</ion-label>
                  <ng-template #NoStatusNote>
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  </ng-template>
                </div>
              </ion-label>
            </ion-col>
          </ion-row> -->
        </ion-grid>
      </ion-item>
    }
    @if (securityDetail?.callOrPut) {
      <ion-item>
        <ion-grid>
          <ion-row>
            <ion-col size="4">
              <ion-label class="">
                <p class="field-heading">Call/Put</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.callOrPutChanged}">
                  @if (securityDetail?.callOrPut) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.callOrPutChanged}">{{securityDetail?.callOrPut}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-label class="">
                <p class="field-heading">Contract size</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.contractSizeChanged}">
                  @if (securityDetail?.contractSize) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.contractSizeChanged}">{{securityDetail?.contractSizeDisplay}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-label class="">
                <p class="field-heading">Basis quote</p>
                <div class="highlight-area" [ngClass]="{'highlight-change-area': securityDetail?.quotationBasisChanged}">
                  @if (securityDetail?.quotationBasis) {
                    <ion-label [ngClass]="{'highlight-change': securityDetail?.quotationBasisChanged}">{{securityDetail?.quotationBasis}}</ion-label>
                  } @else {
                    <ion-skeleton-text class="full-skeleton"></ion-skeleton-text>
                  }
                </div>
              </ion-label>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>
    }
  </ion-list>
}
</ion-content>
